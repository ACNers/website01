<!DOCTYPE html>
<html lang="en">
<div id="ani">

  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cross-Origin-Opener-Policy" content="same-origin-allow-popups">
    <title>Events 3.0</title>
    <link rel="stylesheet" href="event.css">
    <link rel="icon" href="/image/Amrita_CyberNation_Logo___1_-removebg-preview (1).png" type="image/icon type">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">



    <style>
      .navbar {
        background-color: rgba(27, 36, 45, 0.5);
        height: 80px;
        width: 100%;
        position: fixed;
        top: 0;
        left: 0;
        z-index: 1000;
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0 30px;
        transition: transform 1.5s ease, width 1s ease, border-radius 1s ease, margin-left 1s ease, margin-top 1s ease;
        animation: textReveal 2s;
      }

      @keyframes textReveal {
        0% {
          opacity: 0;
          transform: translateY(-100px);
        }

        100% {
          opacity: 1;
          transform: translateY(0px);
        }
      }

      .navbar.shrink {
        height: 80px;
        width: 90%;
        margin-left: calc((100vw - 90vw) / 2);
        margin-top: 20px;
        border-radius: 70px;
      }

      .navbar.scrolledup {
        transition: width 0.5s ease-out, border-radius 0.5s ease-out, margin-left 0.5s ease-out, margin-top 0.5s ease-out;
      }

      .navbar-brand img {
        height: 75px;
      }

      .moving-text {
        white-space: nowrap;
        position: relative;
        font-size: 20px;
        font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
        color: white;
        text-transform: uppercase;
        letter-spacing: 5px;
        overflow: hidden;
        width: 51%;
      }

      .text-slide {
        display: inline-flex;
        align-items: center;
        animation: 10s slide infinite linear;
      }

      @keyframes slide {
        from {
          transform: translateX(0%);
        }

        to {
          transform: translateX(-50%);
        }
      }

      .animated-button {
        width: 130px;
        height: 35px;
        background-color: #b22049;
        color: white;
        border: none;
        font-size: 15px;
        cursor: pointer;
        position: relative;
        overflow: hidden;
        transition: color 0.3s, background-color 0.3s;
        display: flex;
        justify-content: center;
        align-items: center;
        border-radius: 40px;
        margin: 0 10px;
      }

      .animated-button:hover {
        background-color: white;
      }

      .animated-button:hover span {
        color: #b22049;
      }

      .navbar-nav .nav-item .nav-link {
        color: white;
        padding: 7px 7px;
        border-radius: 10px;
        transition: background-color 0.3s ease, color 0.3s ease;
      }

      .navbar-nav .nav-item .nav-link:hover {
        background-color: #b22049;
        color: #ffffff;
      }

      .navbar-toggler {
        margin-left: auto;
        border: none;
        background: transparent;
        margin-bottom: 3%;
        width: 50px;
        height: 50px;
      }

      .navbar-toggler-icon {
        background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba(255, 255, 255, 0.55)' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e");
      }

      .navigation__menu {
        font-size: 20px;
        gap: 12px;
      }

      .dropdown-menu.navigation__submenu,
      .dropdown-menu.navigation__submenu.show {
        background-color: #000000;
      }

      .dropdown-menu.navigation__submenu .dropdown-item {
        color: white;
      }

      .dropdown-menu.navigation__submenu .dropdown-item:hover,
      .dropdown-menu.navigation__submenu .dropdown-item:focus {
        background-color: #b22049;
        color: white;
        display: block;
        margin-left: 5px;
      }

      .navbar-nav .dropdown {
        position: relative;
      }

      .navbar-nav .dropdown-menu {
        margin-top: 0;
      }

      .navbar-nav .dropdown:hover .dropdown-menu {
        display: block;
      }

      .navbar-nav .dropdown-menu {
        display: none;
      }

      .navbar-nav .dropdown-menu:hover {
        display: block;
      }

      .navbar-nav .dropdown-menu {
        top: 100%;
        left: 0;
      }

      @media (max-width: 992px) {
        .navbar-expand-lg .navbar-nav .nav-link {
          padding-right: .5rem;
          padding-left: .5rem;
          font-size: 18px !important;
        }

        .moving-text {
          display: none;
        }

        .animated-button {
          width: 100px;
          height: 30px;
          font-size: 12px;
        }

        .navbar-collapse {
          background-color: rgba(0, 0, 0, 0.9);
          position: absolute;
          top: 80px;
          left: 0;
          right: 0;
          z-index: 1000;
        }
      }

      @media (max-width: 768px) {
        .moving-text {
          width: 65% !important;
          margin-bottom: 20px;
        }
      }

      @media (max-width: 480px) {
        .moving-text {
          width: 59% !important;
          margin-bottom: 20px;
        }
      }

      .dropdown-toggle::after {
        transition: transform 0.3s ease;
      }

      .nav-item.dropdown:hover .dropdown-toggle::after {
        transform: rotate(180deg);
      }

      .navbar-nav .dropdown:hover .dropdown-menu {
        display: block;
      }

      @media (max-width: 992px) {
        .navbar-nav .dropdown-menu {
          position: static;
          float: none;
        }
      }

      .box-images {
        object-fit: cover;
      }

      /* Profile Container */
      .profile-container {
        position: relative;
      }

      .profile-circle {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background-color: #ddd;
        cursor: pointer;
        overflow: hidden;
      }

      .profile-circle img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }

      .col-12 col-md-4 {
        z-index: 100;
      }

      /*purchase history*/
      .purchase-history {
        max-height: 200px;
        overflow: hidden;
      }

      .purchase-list-container {
        max-height: 150px;
        overflow-y: auto;
        padding-right: 10px;
      }

      .purchase-item {
        margin-bottom: 10px;
        padding-bottom: 10px;
        border-bottom: 1px solid #444;
      }

      .purchase-list-container::-webkit-scrollbar {
        width: 8px;
      }

      .purchase-list-container::-webkit-scrollbar-track {
        background: #f1f1f1;
      }

      .purchase-list-container::-webkit-scrollbar-thumb {
        background: #888;
        border-radius: 4px;
      }

      .purchase-list-container::-webkit-scrollbar-thumb:hover {
        background: #555;
      }

      /* Profile Dropdown */
      .profile-dropdown {
        display: none;
        position: absolute;
        top: 60px;
        right: 0;
        background-color: #1f1f1f;
        border-radius: 10px;
        width: 320px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        padding: 20px;
        z-index: 1000;
        color: white;
      }

      .profile-dropdown h2,
      .profile-dropdown p {
        margin: 0;
        color: white;
      }

      .profile-dropdown h2 {
        font-size: 18px;
        font-weight: normal;
        margin-bottom: 5px;
      }

      .profile-dropdown p {
        font-size: 14px;
        color: #bbb;
      }

      /* Account Actions */
      .account-actions {
        margin-top: 20px;
        display: flex;
        justify-content: space-between;
      }

      .account-actions button {
        background-color: #333;
        color: white;
        border: none;
        border-radius: 5px;
        padding: 10px;
        width: 48%;
        cursor: pointer;
        text-align: center;
      }

      .account-actions button:hover {
        background-color: #555;
      }

      /* Close Button */
      .close-button {
        position: absolute;
        top: 10px;
        right: 10px;
        background: none;
        border: none;
        color: white;
        font-size: 18px;
        cursor: pointer;
      }

      /*login*/
      .login-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.8);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 9999;
      }

      .login-box {
        background-color: white;
        padding: 2rem;
        border-radius: 10px;
        text-align: center;
      }

      .google-sign-in-button {
        background-color: #4285F4;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
        cursor: pointer;
        font-size: 16px;
        margin-top: 20px;
      }
    </style>
  </head>

  <body>
    <div id="loginOverlay" class="login-overlay">
      <div class="login-box">
        <h2>Welcome to Events 3.0</h2>
        <p>Please sign in with Google to access the content.</p>
        <button id="googleSignInButton" class="google-sign-in-button">Sign in with Google</button>
      </div>
    </div>
    <header>

      <section id="home" class="section">
        <nav class="navbar navbar-expand-lg" id="myNav">
          <div class="container-fluid">
            <a href="/index.html" class="logo navbar-brand">
              <img src="/image/Amrita_CyberNation_Logo___1_-removebg-preview (1).png" alt="Logo" style="height: 75px;">
            </a>

            <div class="moving-text d-none d-lg-block">
              <div class="text-slide">
                <span>ACN 3rd edition</span>
                <span>|</span>
                <a href="/events/2024/event-2024.html"><button class="animated-button"><span>Register
                      Now</span></button></a>
                <span>|</span>
                <span>ACN 3rd edition</span>
                <span>|</span>
                <a href="/events/2024/event-2024.html"><button class="animated-button"><span>Register
                      Now</span></button></a>
                <span>|</span>
              </div>
            </div>

            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
              aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse navigation" id="navbarNav">
              <ul class="navbar-nav ms-auto navigation__menu">
                <li class="nav-item">
                  <a class="nav-link" href="/index.html">Home<span></span></a>
                </li>
                <li class="nav-item dropdown">
                  <a class="nav-link dropdown-toggle" href="#" id="editionsDropdown" role="button"
                    data-bs-toggle="dropdown" aria-expanded="false">Events 3.0</a>
                  <ul class="dropdown-menu navigation__submenu" aria-labelledby="editionsDropdown">
                    <li><a class="dropdown-item" href="/coming-soon.html">ACN Cyber conclave</a></li>
                    <li><a class="dropdown-item" href="/coming-soon.html">ACN Cyber Workshop</a></li>
                    <li><a class="dropdown-item" href="/coming-soon.html">Amrita Developers Group</a></li>
                    <li><a class="dropdown-item" href="/events/2024/event-2024.html">ACN Cyber Tech Fest</a></li>
                    <li><a class="dropdown-item" href="/Editions/cyber-awareness-page/index.html">ACN Cyber
                        Awareness</a></li>
                  </ul>
                </li>
                <li class="nav-item dropdown">
                  <a class="nav-link dropdown-toggle" href="#" id="editionsDropdown" role="button"
                    data-bs-toggle="dropdown" aria-expanded="false">Editions</a>
                  <ul class="dropdown-menu navigation__submenu" aria-labelledby="editionsDropdown">
                    <li><a class="dropdown-item" href="/events/2022/event-2022.html">2022</a></li>
                    <li><a class="dropdown-item" href="/events/2023/event-2023.html">2023</a></li>
                  </ul>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="/sponsors/spon.html">Sponsors<span></span></a>
                </li>
                <li class="nav-item dropdown">
                  <a class="nav-link dropdown-toggle" href="#" id="galleryDropdown" role="button"
                    data-bs-toggle="dropdown" aria-expanded="false">Gallery</a>
                  <ul class="dropdown-menu navigation__submenu" aria-labelledby="galleryDropdown">
                    <li><a class="dropdown-item" href="/gallery-by-year/2022/2022.html">2022</a></li>
                    <li><a class="dropdown-item" href="/gallery-by-year/2023/2023.html">2023</a></li>
                  </ul>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="/meetup/meetup.html">Team<span></span></a>
                </li>
                <li class="nav-item">
                  <div class="profile-container">
                    <div class="profile-circle" id="profileCircle">
                      <img id="profileImage" src="https://via.placeholder.com/50" alt="Profile">
                    </div>
                    <div class="profile-dropdown" id="profileDropdown" style="display: none;">
                      <button class="close-button" id="closeButton">&times;</button>
                      <div class="profile-info">
                        <h2 id="userName">User Name</h2>
                        <p id="userEmail">user@example.com</p>
                      </div>
                      <div class="purchase-history">
                        <h3 style="color: #4285F4;">Purchase History</h3>
                        <div class="purchase-list-container">
                          <div id="purchaseList"></div>
                        </div>
                      </div>
                      <div class="account-actions">
                        <button id="logoutButton" class="logout-button" style="display: none;">Sign out</button>
                        <button id="loginButton" class="login-button">Log in with Gmail</button>
                      </div>
                    </div>
                  </div>
                </li>
              </ul>
            </div>
          </div>
        </nav>
      </section>
    </header>

    <div>
      <h1 class="heading">Events</h1>
      <h2 class="heading">These are events that are going to happens
        in
        Amrita Cyber Nation 2024 (3rd edition) </h2>
    </div>

    <div class="container">
      <div class="row">
        <div class="col-12 col-md-4">
          <div class="box-body">
            <div class="box-images">
              <img id="day1Image" src="" alt="Image 1">
            </div>
            <div class="box-text">
              <h2 id="header1">Card 1</h2>
              <p id="box-text1"></p>
              <a class="learn-more-btn" href="/2024/Gamefusion4.0.html">Learn More</a>
              <input type="checkbox" id="popup-toggle1" class="popup-toggle">
              <label for="popup-toggle1" class="overlay"></label>
              <div class="box">
                <div class="box-content">
                  <h2 id="events1"></h2>
                  <strong>
                    <p id="eventdetails1">Additional information about Card 1.</p>
                  </strong>
                </div>
              </div>
              <button class="animated-button1" id="a1"><span>Register</span></button>
            </div>
          </div>
        </div>
        <div class="col-12 col-md-4">
          <div class="box-body">
            <div class="box-images">
              <img id="day2Image" src="" alt="Image 2">
            </div>
            <div class="box-text">
              <h2 id="header2">Card 2</h2>
              <p id="box-text2"></p>
              <a class="learn-more-btn" href="/cryptoshield-2024.html">Learn More</a>
              <div class="box">
                <div class="box-content">
                  <h2 id="events2">Popup Card 2</h2>
                  <strong>
                    <p id="eventdetails2">Additional information about Card 2.</p>
                  </strong>
                </div>
              </div>
              <button class="animated-button1" id="a2"><span>Register</span></button>
            </div>
          </div>
        </div>
        <div class="col-12 col-md-4">
          <div class="box-body">
            <div class="box-images">
              <img id="day3Image" src="" alt="Image 3">
            </div>
            <div class="box-text">
              <h2 id="header3"></h2>
              <p id="box-text3"></p>
              <a class="learn-more-btn" href="/2024/ACN_CTF.html">Learn More</a>
              <input type="checkbox" id="popup-toggle3" class="popup-toggle">
              <label for="popup-toggle3" class="overlay"></label>
              <div class="box">
                <div class="box-content">
                  <h2 id="events3">Popup Card 3</h2>
                  <strong>
                    <p id="eventdetails3">Additional information about Card 3.</p>
                  </strong>
                </div>
              </div>
              <button class="animated-button1" id="a3"><span>Register</span></button>
            </div>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-12 col-md-4">
          <div class="box-body">
            <div class="box-images">
              <img id="day4Image" src="" alt="Image 4">
            </div>
            <div class="box-text">
              <h2 id="header4"></h2>
              <p id="box-text4"></p>
              <a class="learn-more-btn" href="/2024/Forensic_Files.html">Learn More</a>
              <input type="checkbox" id="popup-toggle4" class="popup-toggle">
              <label for="popup-toggle4" class="overlay"></label>
              <div class="box">
                <div class="box-content">
                  <h2 id="events4">Popup Card 4</h2>
                  <strong>
                    <p id="eventdetails4">Additional information about Card 4.</p>
                  </strong>
                </div>
              </div>
              <button class="animated-button1" id="a4"><span>Register</span></button>
            </div>
          </div>
        </div>
        <div class="col-12 col-md-4">
          <div class="box-body">
            <div class="box-images">
              <img id="day5Image" src="" alt="Image 5">
            </div>
            <div class="box-text">
              <h2 id="header5"></h2>
              <p id="box-text5"></p>
              <a class="learn-more-btn" href="/2024/IdeAte.html">Learn More</a>
              <input type="checkbox" id="popup-toggle5" class="popup-toggle">
              <label for="popup-toggle5" class="overlay"></label>
              <div class="box">
                <div class="box-content">
                  <h2 id="events5">Popup Card 5</h2>
                  <strong>
                    <p id="eventdetails5">Additional information about Card 5.</p>
                  </strong>
                </div>
              </div>
              <button class="animated-button1" id="a5"><span>Register</span></button>
            </div>
          </div>
        </div>
        <div class="col-12 col-md-4">
          <div class="box-body">
            <div class="box-images">
              <img id="day6Image" src="" alt="Image 6">
            </div>
            <div class="box-text">
              <h2 id="header6">Card 6</h2>
              <a class="learn-more-btn" href="/2024/Gameathon.html">Learn More</a>
              <input type="checkbox" id="popup-toggle6" class="popup-toggle">
              <label for="popup-toggle6" class="overlay"></label>
              <div class="box">
                <div class="box-content">
                  <h2 id="events6">Popup Card 6</h2>
                  <strong>
                    <p id="eventdetails6">Additional information about Card 6.</p>
                  </strong>
                </div>
              </div>
              <button class="animated-button1" id="a6"><span>Register</span></button>
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-12 col-md-4">
          <div class="box-body">
            <div class="box-images">
              <img id="day7Image" src="" alt="Image 1">
            </div>
            <div class="box-text">
              <h2 id="header7">Card 1</h2>
              <p id="box-text1"></p>
              <a class="learn-more-btn" href="/2024/morphX.html">Learn More</a>
              <input type="checkbox" id="popup-toggle1" class="popup-toggle">
              <label for="popup-toggle1" class="overlay"></label>
              <div class="box">
                <div class="box-content">
                  <h2 id="events1"></h2>
                  <strong>
                    <p id="eventdetails1">Additional information about Card 1.</p>
                  </strong>
                </div>
              </div>
              <button class="animated-button1" id="a7"><span>Register</span></button>
            </div>
          </div>
        </div>
        <div class="col-12 col-md-4">
          <div class="box-body">
            <div class="box-images">
              <img id="day8Image" src="" alt="Image 2">
            </div>
            <div class="box-text">
              <h2 id="header8">Card 2</h2>
              <p id="box-text2"></p>
              <a class="learn-more-btn" href="/2024/MalQuest.html">Learn More</a>
              <div class="box">
                <div class="box-content">
                  <h2 id="events2">Popup Card 2</h2>
                  <strong>
                    <p id="eventdetails2">Additional information about Card 2.</p>
                  </strong>
                </div>
              </div>
              <button class="animated-button1" id="a08"><span>Register</span></button>
            </div>
          </div>
        </div>
        <div class="col-12 col-md-4">
          <div class="box-body">
            <div class="box-images">
              <img id="day9Image" src="" alt="Image 3">
            </div>
            <div class="box-text">
              <h2 id="header9"></h2>
              <p id="box-text3"></p>
              <a class="learn-more-btn" href="/2024/Forensic_Triage_Forum.html">Learn More</a>
              <input type="checkbox" id="popup-toggle3" class="popup-toggle">
              <label for="popup-toggle3" class="overlay"></label>
              <div class="box">
                <div class="box-content">
                  <h2 id="events3">Popup Card 3</h2>
                  <strong>
                    <p id="eventdetails3">Additional information about Card 3.</p>
                  </strong>
                </div>
              </div>
              <button class="animated-button1" id="a9"><span>Register</span></button>
            </div>
          </div>
        </div>
        <div class="row" style="width: 100%; margin-left: 7px;">
          <div class="col-12 col-md-4">
            <div class="box-body">
              <div class="box-images">
                <img id="day10Image" src="" alt="Image 1">
              </div>
              <div class="box-text">
                <h2 id="header10">Card 1</h2>
                <p id="box-text10"></p>
                <a class="learn-more-btn" href="/2024/Cinemagic.html">Learn More</a>
                <input type="checkbox" id="popup-toggle1" class="popup-toggle">
                <label for="popup-toggle1" class="overlay"></label>
                <div class="box">
                  <div class="box-content">
                    <h2 id="events1"></h2>
                    <strong>
                      <p id="eventdetails1">Additional information about Card 1.</p>
                    </strong>
                  </div>
                </div>
                <button class="animated-button1" id="a10"><span>Register</span></button>
              </div>
            </div>
          </div>
        </div>

      </div>


      <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
      <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
      <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
      <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-storage.js"></script>
      <script src="script.js"></script>
      <script src="events.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/vanta@latest/dist/vanta.fog.min.js"></script>
      <script>
        VANTA.FOG({
          el: "#ani",
          mouseControls: true,
          touchControls: true,
          gyroControls: false,
          minHeight: 200.00,
          minWidth: 200.00,
          highlightColor: 0x212127,
          midtoneColor: 0xb35ca9,
          baseColor: 0x0,
          blurFactor: 0.50,
          speed: 1.20,
          zoom: 0.35
        })
      </script>
      <script>
        document.addEventListener('DOMContentLoaded', () => {
          const loginOverlay = document.getElementById('loginOverlay');
          const googleSignInButton = document.getElementById('googleSignInButton');
          const profileCircle = document.getElementById('profileCircle');
          const profileDropdown = document.getElementById('profileDropdown');
          const profileImage = document.getElementById('profileImage');
          const userName = document.getElementById('userName');
          const userEmail = document.getElementById('userEmail');
          const purchaseList = document.getElementById('purchaseList');
          const loginButton = document.getElementById('loginButton');
          const logoutButton = document.getElementById('logoutButton');
          const closeButton = document.getElementById('closeButton');

          var dropdownElementList = [].slice.call(document.querySelectorAll('.dropdown-toggle'))
          var dropdownList = dropdownElementList.map(function (dropdownToggleEl) {
            return new bootstrap.Dropdown(dropdownToggleEl)
          })

          function showLoginOverlay() {
            loginOverlay.style.display = 'flex';
          }

          function hideLoginOverlay() {
            loginOverlay.style.display = 'none';
          }

          function signInWithGoogle() {
            const provider = new firebase.auth.GoogleAuthProvider();
            auth1.signInWithPopup(provider)
              .then((result) => {
                const user = result.user;
                updateProfileInfo(user);
                fetchPurchaseHistory(user.email);
                hideLoginOverlay();
              })
              .catch((error) => {
                console.error('Error during login:', error);
              });
          }

          googleSignInButton.addEventListener('click', signInWithGoogle);
          loginButton.addEventListener('click', signInWithGoogle);

          profileCircle.addEventListener('click', () => {
            profileDropdown.style.display = profileDropdown.style.display === 'none' ? 'block' : 'none';
          });

          closeButton.addEventListener('click', () => {
            profileDropdown.style.display = 'none';
          });

          logoutButton.addEventListener('click', () => {
            auth1.signOut().then(() => {
              resetProfileInfo();
              showLoginOverlay();
            }).catch((error) => {
              console.error('Error logging out:', error);
            });
          });

          document.addEventListener('firebaseInitialized', () => {
            if (auth1) {
              auth1.onAuthStateChanged(user => {
                if (user) {
                  updateProfileInfo(user);
                  fetchPurchaseHistory(user.email);
                  hideLoginOverlay();
                } else {
                  resetProfileInfo();
                  showLoginOverlay();
                }
              });
            } else {
              console.error('Firebase Authentication not initialized properly.');
            }
          });

          function updateProfileInfo(user) {
            profileImage.src = user.photoURL || 'https://via.placeholder.com/50';
            userName.textContent = user.displayName || 'Anonymous User';
            userEmail.textContent = user.email || 'No email available';
            loginButton.style.display = 'none';
            logoutButton.style.display = 'block';
          }

          function resetProfileInfo() {
            profileImage.src = 'https://via.placeholder.com/50';
            userName.textContent = 'User Name';
            userEmail.textContent = 'user@example.com';
            loginButton.style.display = 'block';
            logoutButton.style.display = 'none';
            purchaseList.innerHTML = '';
          }

          function fetchPurchaseHistory(email) {
            if (!db1) {
              console.error('Firestore database not initialized.');
              return;
            }
            db1.collection('registrations')
              .where('email', '==', email)
              .get()
              .then((querySnapshot) => {
                purchaseList.innerHTML = '';
                querySnapshot.forEach((doc) => {
                  const data = doc.data();
                  const timestamp = data.timestamp.toDate();
                  const formattedDate = timestamp.toLocaleString();
                  const purchaseItem = document.createElement('div');
                  purchaseItem.classList.add('purchase-item');
                  purchaseItem.textContent = `Event: ${data.event}, Date: ${formattedDate}`;
                  purchaseList.appendChild(purchaseItem);
                });
              })
              .catch((error) => {
                console.error("Error fetching purchase history: ", error);
              });
          }

          // Popup and overlay functionality
          const popupToggles = document.querySelectorAll('.popup-toggle');
          const overlays = document.querySelectorAll('.overlay');
          const boxes = document.querySelectorAll('.box');

          popupToggles.forEach((toggle, index) => {
            toggle.addEventListener('change', function () {
              if (this.checked) {
                boxes[index].style.display = 'block';
                overlays[index].style.display = 'block';
              } else {
                boxes[index].style.display = 'none';
                overlays[index].style.display = 'none';
              }
            });
          });

          overlays.forEach((overlay, index) => {
            overlay.addEventListener('click', function () {
              popupToggles[index].checked = false;
              boxes[index].style.display = 'none';
              this.style.display = 'none';
            });
          });

          // Navbar functionality
          $('.navbar-toggler').on('click', function () {
            $(this).find('.navbar-toggler-icon').toggleClass('active');
            if ($('.navbar-toggler-icon').hasClass('active')) {
              $('.navbar-toggler-icon').html('&times;');
            } else {
              $('.navbar-toggler-icon').html('');
              $('.navbar-toggler-icon').addClass('navbar-toggler-icon');
            }
          });

          $(window).on('scroll', function () {
            var navbar = $('#myNav');
            var scrollTop = $(this).scrollTop();
            var lastScrollTop = 0;

            if (scrollTop > 0) {
              navbar.addClass('shrink');
            } else {
              navbar.removeClass('shrink');
            }

            if (scrollTop > lastScrollTop) {
              navbar.addClass('scrolledup');
            } else {
              navbar.removeClass('scrolledup');
            }

            lastScrollTop = scrollTop;
          });

          var dropdownTimeout;
          $('.navbar-nav .dropdown').hover(
            function () {
              var $this = $(this);
              clearTimeout(dropdownTimeout);
              $this.addClass('show');
              $this.find('.dropdown-menu').addClass('show');
            },
            function () {
              var $this = $(this);
              dropdownTimeout = setTimeout(function () {
                $this.removeClass('show');
                $this.find('.dropdown-menu').removeClass('show');
              }, 200);
            }
          );

          $('.navbar-nav .dropdown-menu').hover(
            function () {
              clearTimeout(dropdownTimeout);
            },
            function () {
              var $dropdown = $(this).closest('.dropdown');
              dropdownTimeout = setTimeout(function () {
                $dropdown.removeClass('show');
                $dropdown.find('.dropdown-menu').removeClass('show');
              }, 200);
            }
          );

          showLoginOverlay();
        });
      </script>

  </body>
</div>

</html>